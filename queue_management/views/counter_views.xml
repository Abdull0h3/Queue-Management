<?xml version="1.0" encoding="utf-8"?>
<odoo>

    

    <!-- Counter Form View -->

    <record id="view_counter_form" model="ir.ui.view">
        <field name="name">counter.form</field>
        <field name="model">queue.counter</field>
        <field name="arch" type="xml">
            <form string="Counter">
                <header>
                    <button name="view_counter_ticket_form" type="object" string="View Current Ticket"/>
                </header>
                <sheet>
                    <group>
                        <field name="counter_name"/>
                    </group>
                    <notebook>
                        <page name="ticket" string="Tickets">
                            <field name="ticket_ids" readonly="1"/>
                        </page>
                    </notebook>
                </sheet>    
            </form>
        </field>
    </record>

    <!-- Counter-specific Ticket Form View -->
    <record id="view_counter_ticket_form" model="ir.ui.view">
        <field name="name">counter.ticket.form</field>
        <field name="model">queue.counter</field>
        <field name="arch" type="xml">
            <form string="Ticket In Service">
                <header>
                    <button name="action_complete_ticket" type="object" string="Complete"
                            class="btn-primary" attrs="{'invisible': [('current_ticket_status', '!=', 'in_progress')]}"/>
                    <button name="action_skip_ticket" type="object" string="Skip"
                            attrs="{'invisible': [('current_ticket_status', '!=', 'in_progress')]}"/>
                    <button name="action_delayed_ticket" type="object" string="Delay"
                            attrs="{'invisible': [('current_ticket_status', '!=', 'in_progress')]}"/>
                    <button name="action_call_next_ticket" type="object" string="Next Ticket"
                            attrs="{'invisible': [('current_ticket_status', 'in', ['new', 'in_progress', 'waiting'])]}"/>
                    <button name="action_recall_delayed_ticket" type="object" string="Recall Delayed"
                            attrs="{'invisible': [('current_ticket_status', 'in', ['new', 'in_progress', 'waiting'])]}"/>
                    <field name="current_ticket_status" widget="statusbar" readonly="1"
                           statusbar_visible="new, waiting, cancelled, in_progress, completed, skipped, delayed"/>

                </header>
                <sheet>
                    <div class="oe_title">
                        <label for="counter_name" string="Counter Number"/>
                        <h1>
                            <field name="counter_name"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="current_ticket_id"/>
                        </group>
                        <group>

                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>



    <record id="view_counter_tree" model="ir.ui.view">
    <field name="name">queue.counter.tree</field>
    <field name="model">queue.counter</field>
    <field name="arch" type="xml">
        <tree string="Counters">
            <field name="counter_name"/>
            <field name="current_ticket_status" invisible="1"/>
            <field name="current_ticket_id" attrs = "{'invisible': [('current_ticket_status', '!=', 'in_progress')]}" />
        </tree>
    </field>
</record>
    
    <!-- Calendar View for Counters -->
    <record id="view_counter_calendar" model="ir.ui.view">
        <field name="name">queue.counter.calendar</field>
        <field name="model">queue.counter</field>
        <field name="arch" type="xml">
            <calendar string="Counter Calendar" date_start="create_date">
                <field name="counter_name"/>
            </calendar>
        </field>
    </record>

    <!-- Graph View for Counters -->
    <record id="view_counter_graph" model="ir.ui.view">
        <field name="name">queue.counter.graph</field>
        <field name="model">queue.counter</field>
        <field name="arch" type="xml">
            <graph string="Counter Graph" type="bar">
                <field name="counter_name" type="row"/>
                <field name="id" type="measure"/>
            </graph>
        </field>
    </record>

    <!-- Action for Counters -->
    <record id="action_queue_counter" model="ir.actions.act_window">
        <field name="name">Counters</field>
        <field name="res_model">queue.counter</field>
        <field name="view_mode">tree,form,kanban,calendar,graph</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first counter!
            </p>
        </field>
    </record>

    <!-- Menu for Counters -->
    <menuitem id="menu_queue_counter"
              name="Counters"
              parent="menu_queue_management_root"
              action="action_queue_counter"
              sequence="50"/>
</odoo>
